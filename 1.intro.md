# 1 引言

Git欢迎你！Git是一个功能强大的内容跟踪系统。希望这份文档能够加深你对它的理解，向你展示出它底层设计的简洁之道—千万别被它看似错综复杂的命令选项给吓晕了。

开始深入之前，先介绍几个术语名称，它们将在文中反复出现：

* **代码仓库（repository）**— 代码仓库是一系列提交（commits）的集合（一份提交就是一份存档，存储了项目的工作树在过去某个时刻所呈现的样子，不论是在你的机器上还是别人的机器上）。仓库还维护一个HEAD指针（见下），用来标识当前工作树检出的分支或提交位置。最后，仓库还包含一系列分支（branches）和标签（tags），用来命名某些特定的提交。

* **索引（the index）**— Git不同于某些同类工具的是，在提交代码时并不直接把工作树上的改动提交到代码仓库，而是先把改动记录到一个叫做“索引”的地方。可以理解为这样一种机制：它让你在最终进行提交操作之前，有机会挨个“确认”每处改动 — 而提交操作则把所有确认过的改动一次性记录下来。为帮助理解，索引有时也称为 **“暂存区（staging area）”** 。

* **工作树（working tree）**— 即工作目录，它是文件系统上任意一个与代码仓库关联起来的目录（即包含有`.git`子目录）。工作树包括该目录下的所有文件及子目录。

* **提交（commit）**— 提交是工作树在某一时刻的快照。产生提交前的HEAD指针（见下）的指向将成为新提交的父节点。“变更历史”就这样形成了。

* **分支（branch）**— 分支仅仅是某个提交的一个别名（很快会对提交作详细的介绍）。分支也是一种引用（reference），由它指向的提交开始依次往前回溯父提交，串联起来就是这一支的开发历史。由此产生了“分支开发”的概念。

* **标签（tag）**— 标签也是某个提交的别名，与分支类似，只不过同一个tag永远指向同一个commit，以及tag可以带一段描述文字。

* **主分支（master）**— 大部分仓库里，开发的主干都在“master”分支上进行。它其实就是默认分支的名字，没什么特别的。

* **头部指针（HEAD）**— 代码仓库以HEAD指针来标识当前检出（checkout）的内容：

  - 如果checkout的是一个分支，HEAD就指向这个分支，并且暗示着分支名要随着后续的提交而更新。

  - 如果checkout的是一个特定的提交，HEAD就仅仅指向这个提交了。这时候它称为“detached HEAD”。例如，检出一个tag就属于这种情况。

使用Git的流程通常如下：创建一个代码仓库，在工作目录上开始工作。当工作到了某个重要结点 — 可能是一个bug修复完成，可能是一天的工作结束，可能是所有代码通过了编译 —
 你就把改动陆续添加到索引里。一旦你想要提交的全部内容都在索引里了，就把索引的内容记录到仓库中。下图展示了典型的项目生命周期：


![项目生命周期](images/lifecycle.png)

脑海里先有了这幅基本的图像，接下来我将试着阐述各个部分分别是怎样工作、并在Git中扮演其重要角色的。

**LICENSE**: 本文档遵循 [Creative Commons BY 4.0 license](https://creativecommons.org/licenses/by/4.0/legalcode). 若想将本文翻译为其它语言，注明出处即可。
